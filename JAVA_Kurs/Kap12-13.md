# üìö OMFATTANDE SAMMANFATTNING: JAVAFX GUI & H√ÑNDELSEHANTERING

**Kapitel 12 & 13 - Fokus p√• Event Handling & GUI Concepts**

---

## üìë INNEH√ÖLLSF√ñRTECKNING

### **DEL 1: JAVAFX GRUNDKONCEPT** üé®

- JavaFX arkitektur & komponenter
- Scene Graph struktur
- FXML & Scene Builder

### **DEL 2: H√ÑNDELSEHANTERING (EVENT HANDLING)** ‚ö°

- Event-driven programming
- Event handlers & listeners
- Lambda expressions f√∂r events
- Event objects & information

### **DEL 3: CONTROLLER-KLASS PATTERN** üéÆ

- Controller class roll
- @FXML annotation
- Koppla GUI till kod
- Data binding

### **DEL 4: PRAKTISKA GUI-KOMPONENTER** üîß

- TextField, Label, Button
- RadioButton & ToggleGroup
- Layouts (GridPane, VBox, HBox)
- Canvas f√∂r ritning

### **DEL 5: MOUSE & KEYBOARD EVENTS** üñ±Ô∏è‚å®Ô∏è

- Mouse events (clicks, drag, movement)
- Keyboard events
- Event properties

---
## DEL 1: JAVAFX GRUNDKONCEPT üé®

### üèóÔ∏è **JavaFX Arkitektur - √ñversikt**

JavaFX anv√§nder en hierarkisk struktur f√∂r att bygga GUI:er:

```
Stage (F√∂nstret)
  ‚îî‚îÄ> Scene (En "scen" med GUI-komponenter)
       ‚îî‚îÄ> Scene Graph (Tr√§d-struktur av visuella element)
            ‚îî‚îÄ> Root Node (F√∂rsta noden - oftast en layout)
                 ‚îî‚îÄ> Child Nodes (Kontroller, layouts, shapes osv)
```

**üîë Viktiga koncept:**

1. **Stage** = F√∂nstret d√§r din app visas (`javafx.stage.Stage`)
2. **Scene** = Inneh√•llet i f√∂nstret (`javafx.scene.Scene`)
3. **Scene Graph** = Tr√§d-struktur av alla visuella element
4. **Node** = Varje visuellt element (kontroller, shapes, layouts)
5. **Root Node** = F√∂rsta noden i scene graph (ofta en layout container)

**Exempel p√• Scene Graph struktur:**

```
GridPane (root)
‚îú‚îÄ‚îÄ Label "Belopp:"
‚îú‚îÄ‚îÄ TextField (f√∂r input)
‚îú‚îÄ‚îÄ Button "Ber√§kna"
‚îî‚îÄ‚îÄ Label (f√∂r resultat)
```

### üìÑ **FXML - Deklarativ GUI Design**

**Vad √§r FXML?**

- XML-baserat spr√•k f√∂r att definiera GUI **utan Java-kod**
- Separerar GUI (view) fr√•n logik (controller)
- Skapas automatiskt av Scene Builder

**Exempel p√• FXML:**

```xml
<GridPane xmlns:fx="http://javafx.com/fxml">
    <Label text="V√§lkommen!" GridPane.rowIndex="0"/>
    <TextField fx:id="nameField" GridPane.rowIndex="1"/>
    <Button text="Klicka" onAction="#buttonClicked" GridPane.rowIndex="2"/>
</GridPane>
```

**üîë Viktiga FXML-attribut:**

- `fx:id` = Namn f√∂r att referera till komponenten i Java-kod
- `onAction` = Event handler f√∂r button clicks (# f√∂ljt av metodnamn)
- `fx:controller` = Specificerar controller-klass

### üé® **Scene Builder - Visuell GUI-design**

**Vad √§r Scene Builder?**

- Frist√•ende verktyg f√∂r att designa JavaFX GUI visuellt
- Drag-and-drop interface
- Genererar FXML automatiskt
- Live preview av din GUI

**Workflow:**

1. Dra komponenter fr√•n Library till content panel
2. Konfigurera properties i Inspector
3. Ange `fx:id` f√∂r komponenter du vill manipulera i kod
4. Specificera event handlers
5. Spara som `.fxml`-fil

### üì¶ **Layout Containers - √ñversikt**

Layout containers arrangerar child nodes automatiskt:

|Layout|Beskrivning|Anv√§ndning|
|---|---|---|
|**VBox**|Vertikalt (top-to-bottom)|Staplad vertikal layout|
|**HBox**|Horisontellt (left-to-right)|Staplad horisontell layout|
|**GridPane**|Rutn√§t (rows & columns)|Formular, tabeller|
|**BorderPane**|5 regioner (top, bottom, left, right, center)|App med sidopaneler|
|**Pane**|Absolut positionering (x, y)|Rita-applikationer|
|**TitledPane**|Panel med titel (kollapsbar)|Gruppera relaterade kontroller|

---

## DEL 2: H√ÑNDELSEHANTERING (EVENT HANDLING) ‚ö°

### üéØ **Event-Driven Programming Koncept**

**Vad √§r event-driven programming?**

- Program **v√§ntar** p√• anv√§ndarinteraktioner (events)
- N√§r event intr√§ffar, k√∂rs motsvarande **event handler**
- Anv√§ndaren **driver** programfl√∂det (inte sekventiell kod)

**Event-driven vs Sequential Programming:**

```java
// SEQUENTIAL (inte event-driven)
System.out.println("V√§lkommen!");
String name = scanner.nextLine();  // Blockerar h√§r
System.out.println("Hej " + name);

// EVENT-DRIVEN (JavaFX)
Button button = new Button("Klicka");
button.setOnAction(event -> {
    // K√∂rs endast n√§r anv√§ndaren klickar!
    System.out.println("Button klickad!");
});
```

### ‚ö° **Event Handler Grundl√§ggande**

**Vad √§r en Event Handler?** En metod som k√∂rs som svar p√• en anv√§ndarinteraktion (event).

**Tv√• s√§tt att koppla event handlers:**

#### **1Ô∏è‚É£ Direkt i FXML (f√∂r Action events)**

**I Scene Builder:**

1. V√§lj komponenten (t.ex. Button)
2. G√• till Inspector ‚Üí Code section
3. Ange metodnamn i `On Action` f√§ltet

**FXML:**

```xml
<Button text="Ber√§kna" onAction="#calculateButtonPressed"/>
```

**Java Controller:**

```java
@FXML
private void calculateButtonPressed(ActionEvent event) {
    // Din kod h√§r
    System.out.println("Button klickad!");
}
```

**üîë Viktigt:**

- Metodnamn i FXML m√•ste **matcha exakt** i controller
- Metoden m√•ste ha `@FXML` annotation
- Metoden tar emot l√§mplig Event-parameter (t.ex. `ActionEvent`)

#### **2Ô∏è‚É£ Programmatiskt (f√∂r property-change events)**

F√∂r events som intr√§ffar n√§r en komponents v√§rde √§ndras (t.ex. Slider), m√•ste du skapa event handler i Java-kod:

```java
@FXML private Slider tipPercentageSlider;

@Override
public void initialize() {
    // Lyssna p√• v√§rde√§ndringar
    tipPercentageSlider.valueProperty().addListener(
        new ChangeListener<Number>() {
            @Override
            public void changed(ObservableValue<? extends Number> observable,
                              Number oldValue, Number newValue) {
                // Reagera p√• √§ndring
                System.out.println("Nytt v√§rde: " + newValue);
            }
        }
    );
}
```

**Med Lambda (modern Java):**

```java
tipPercentageSlider.valueProperty().addListener((observable, oldValue, newValue) -> {
    System.out.println("Nytt v√§rde: " + newValue);
});
```

### üìã **Vanliga Event Types**

#### **ActionEvent** (Button clicks, RadioButton selection)

```java
@FXML
private void buttonClicked(ActionEvent event) {
    System.out.println("Button klickad!");
    
    // F√• tag i Button-objektet
    Button source = (Button) event.getSource();
    System.out.println("Text: " + source.getText());
}
```

#### **ChangeListener** (Slider v√§rde√§ndring, TextField text √§ndring)

```java
// Interface: ChangeListener<T>
textField.textProperty().addListener((observable, oldValue, newValue) -> {
    System.out.println("Text √§ndrades fr√•n '" + oldValue + "' till '" + newValue + "'");
});

slider.valueProperty().addListener((observable, oldValue, newValue) -> {
    System.out.println("V√§rde: " + newValue.doubleValue());
});
```

#### **MouseEvent** (Mouse clicks, drags, movement)

```java
@FXML
private void canvasMouseClicked(MouseEvent event) {
    double x = event.getX();  // X-koordinat
    double y = event.getY();  // Y-koordinat
    System.out.println("Klickad p√•: (" + x + ", " + y + ")");
}
```

### üîç **Event Object Information**

Varje event handler f√•r ett **event object** som inneh√•ller information om h√§ndelsen:

```java
@FXML
private void handleMouseEvent(MouseEvent event) {
    // Position
    double x = event.getX();
    double y = event.getY();
    
    // Vilken musknapp?
    MouseButton button = event.getButton();
    if (button == MouseButton.PRIMARY) {
        System.out.println("V√§nster musknapp");
    }
    
    // Antal klick (enkel-/dubbelklick)
    int clickCount = event.getClickCount();
    
    // Modifier-tangenter
    boolean shift = event.isShiftDown();
    boolean ctrl = event.isControlDown();
    
    // K√§llan till eventet
    Object source = event.getSource();
}
```

---

## DEL 3: CONTROLLER-KLASS PATTERN üéÆ

### üé≠ **Model-View-Controller (MVC) Pattern**

JavaFX FXML-apps f√∂ljer MVC-designm√∂nstret:

```
MODEL (Data)
   ‚Üï
CONTROLLER (Logik)
   ‚Üï
VIEW (GUI - FXML)
```

**üîë Roller:**

1. **Model** = Applikationsdata (t.ex. r√§kning, dricks, totalsumma)
2. **View** = GUI (FXML-fil skapad i Scene Builder)
3. **Controller** = Logik som kopplar model och view

**Exempel:**

```
Tip Calculator:
- Model: belopp, dricksprocent, dricks, totalsumma
- View: TextFields, Labels, Slider, Button (i FXML)
- Controller: TipCalculatorController (ber√§knar och uppdaterar GUI)
```

### üìù **Controller Class Struktur**

**Komplett controller-klass exempel:**

```java
import javafx.event.ActionEvent;
import javafx.fxml.FXML;
import javafx.scene.control.*;

public class TipCalculatorController {
    
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // STEG 1: @FXML INSTANCE VARIABLES
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // Dessa kopplas till komponenter med matchande fx:id i FXML
    
    @FXML private TextField amountTextField;
    @FXML private Label tipPercentageLabel;
    @FXML private Slider tipPercentageSlider;
    @FXML private TextField tipTextField;
    @FXML private TextField totalTextField;
    
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // STEG 2: INSTANCE VARIABLES F√ñR STATE
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    private BigDecimal tipPercentage = new BigDecimal("0.15");
    private NumberFormat currency = NumberFormat.getCurrencyInstance();
    private NumberFormat percent = NumberFormat.getPercentInstance();
    
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // STEG 3: initialize() - K√ñRS N√ÑR GUI LADDAS
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    public void initialize() {
        // Formatera currency till 2 decimaler
        currency.setRoundingMode(RoundingMode.HALF_UP);
        
        // Lyssna p√• Slider-√§ndringar
        tipPercentageSlider.valueProperty().addListener(
            (observable, oldValue, newValue) -> {
                tipPercentage = BigDecimal.valueOf(newValue.intValue() / 100.0);
                tipPercentageLabel.setText(percent.format(tipPercentage));
            }
        );
    }
    
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // STEG 4: EVENT HANDLERS
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    @FXML
    private void calculateButtonPressed(ActionEvent event) {
        try {
            // H√§mta belopp
            BigDecimal amount = new BigDecimal(amountTextField.getText());
            
            // Ber√§kna dricks och totalt
            BigDecimal tip = amount.multiply(tipPercentage);
            BigDecimal total = amount.add(tip);
            
            // Visa resultat
            tipTextField.setText(currency.format(tip));
            totalTextField.setText(currency.format(total));
        }
        catch (NumberFormatException e) {
            amountTextField.setText("Ange ett giltigt belopp");
            amountTextField.selectAll();
        }
    }
}
```

### üîë **@FXML Annotation**

**Varf√∂r anv√§nds @FXML?**

- Indikerar att variabel/metod kan anv√§ndas i FXML
- FXMLLoader anv√§nder detta f√∂r att koppla FXML till Java-kod

**F√∂r instance variables:**

```java
@FXML private TextField nameField;  // M√•ste matcha fx:id="nameField" i FXML
@FXML private Button submitButton;  // M√•ste matcha fx:id="submitButton" i FXML
```

**F√∂r metoder:**

```java
@FXML
private void buttonClicked(ActionEvent event) {
    // M√•ste matcha onAction="#buttonClicked" i FXML
}
```

**‚ö†Ô∏è VIKTIGT:**

- Variabelnamn i Java **M√ÖSTE** matcha `fx:id` i FXML **exakt**
- Metodnamn i Java **M√ÖSTE** matcha event handler-namn i FXML **exakt**
- Annars f√•r du runtime-fel n√§r FXML laddas!

### üîÑ **initialize() Method**

**Vad √§r initialize()?**

- Special metod som FXMLLoader **automatiskt kallar** efter GUI laddats
- Anv√§nds f√∂r att konfigurera initial state
- K√∂rs **innan** GUI visas f√∂r anv√§ndaren

**Typisk anv√§ndning:**

```java
public void initialize() {
    // 1. S√§tt initialv√§rden
    tipPercentageLabel.setText("15%");
    
    // 2. Konfigurera komponenter
    amountTextField.setPromptText("Ange belopp");
    
    // 3. Registrera property listeners
    slider.valueProperty().addListener((obs, old, newVal) -> {
        label.setText(String.format("%.0f%%", newVal));
    });
    
    // 4. S√§tt user data p√• RadioButtons
    redRadioButton.setUserData(Color.RED);
    blueRadioButton.setUserData(Color.BLUE);
    
    // 5. Initial ber√§kning om beh√∂vs
    updateDisplay();
}
```

### üöÄ **Komplett Application Class**

F√∂r att starta en JavaFX FXML-app:

```java
import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.stage.Stage;

public class TipCalculator extends Application {
    
    @Override
    public void start(Stage stage) throws Exception {
        // 1. Ladda FXML och skapa scene graph
        Parent root = FXMLLoader.load(
            getClass().getResource("TipCalculator.fxml")
        );
        
        // 2. Skapa Scene med scene graph
        Scene scene = new Scene(root);
        
        // 3. Konfigurera Stage
        stage.setTitle("Tip Calculator");
        stage.setScene(scene);
        stage.show();
    }
    
    public static void main(String[] args) {
        launch(args);  // Startar JavaFX runtime
    }
}
```

**Vad h√§nder n√§r launch(args) k√∂rs?**

1. JavaFX runtime initialiseras
2. Ett objekt av `TipCalculator` skapas
3. `start()` metoden anropas med en `Stage`
4. FXMLLoader:
    - L√§ser FXML-filen
    - Skapar GUI-komponenter
    - Skapar controller-objekt
    - Kopplar `@FXML` variabler till komponenter
    - Registrerar event handlers
    - Anropar `initialize()` p√• controller
5. GUI visas

---

## DEL 4: PRAKTISKA GUI-KOMPONENTER üîß

### üì¶ **TextField - Textinmatning**

```java
@FXML private TextField nameField;

// H√§mta text
String name = nameField.getText();

// S√§tt text
nameField.setText("Hej v√§rlden");

// Rensa f√§lt
nameField.clear();

// Markera all text
nameField.selectAll();

// Prompt text (placeholder)
nameField.setPromptText("Ange ditt namn...");

// Lyssna p√• text√§ndringar
nameField.textProperty().addListener((obs, oldText, newText) -> {
    System.out.println("Text √§ndrades till: " + newText);
});
```

### üè∑Ô∏è **Label - Visa text**

```java
@FXML private Label resultLabel;

// S√§tt text
resultLabel.setText("Resultat: 150 kr");

// √Ñndra font
resultLabel.setStyle("-fx-font-size: 20px; -fx-font-weight: bold;");

// F√§rg
resultLabel.setTextFill(Color.RED);
```

### üîò **Button - Klickbara knappar**

```java
@FXML private Button calculateButton;

// Event handler i FXML: onAction="#calculateButtonPressed"

@FXML
private void calculateButtonPressed(ActionEvent event) {
    System.out.println("Button klickad!");
    
    // √Ñndra button text
    calculateButton.setText("Ber√§knar...");
    
    // Disable button under ber√§kning
    calculateButton.setDisable(true);
    
    // ... g√∂r ber√§kning ...
    
    // Enable igen
    calculateButton.setDisable(false);
    calculateButton.setText("Ber√§kna");
}
```

### üéöÔ∏è **Slider - V√§lj v√§rde**

```java
@FXML private Slider tipSlider;

// Konfigurera i initialize()
public void initialize() {
    // S√§tt range
    tipSlider.setMin(0);
    tipSlider.setMax(30);
    tipSlider.setValue(15);  // Startv√§rde
    
    // Visa markeringar
    tipSlider.setShowTickMarks(true);
    tipSlider.setShowTickLabels(true);
    
    // Major tick varje 5, minor tick varje 1
    tipSlider.setMajorTickUnit(5);
    tipSlider.setMinorTickCount(4);
    
    // Snap till ticks (endast heltal)
    tipSlider.setSnapToTicks(true);
    
    // Lyssna p√• v√§rde√§ndringar
    tipSlider.valueProperty().addListener((obs, oldVal, newVal) -> {
        int percentage = newVal.intValue();
        System.out.println("Dricks: " + percentage + "%");
    });
}
```

### üîµ **RadioButton & ToggleGroup**

**RadioButtons** = √ñmsesidigt exklusiva val (endast en kan vara vald)

```java
@FXML private RadioButton smallRadioButton;
@FXML private RadioButton mediumRadioButton;
@FXML private RadioButton largeRadioButton;
@FXML private ToggleGroup sizeToggleGroup;

public void initialize() {
    // S√§tt user data (extra information p√• varje RadioButton)
    smallRadioButton.setUserData(2);    // Storlek 2
    mediumRadioButton.setUserData(4);   // Storlek 4
    largeRadioButton.setUserData(6);    // Storlek 6
    
    // V√§lj medium som default (kan ocks√• g√∂ras i FXML)
    mediumRadioButton.setSelected(true);
}

@FXML
private void sizeRadioButtonSelected(ActionEvent event) {
    // Hitta vilken RadioButton som √§r vald
    RadioButton selected = (RadioButton) sizeToggleGroup.getSelectedToggle();
    
    // H√§mta user data
    int size = (Integer) selected.getUserData();
    
    System.out.println("Vald storlek: " + size);
}
```

**I FXML (Scene Builder):**

1. Dra RadioButtons till GUI
2. F√∂r varje RadioButton, s√§tt `Toggle Group` property till samma namn (t.ex. "sizeToggleGroup")
3. Detta skapar automatiskt ToggleGroup i FXML

---

## DEL 5: MOUSE & KEYBOARD EVENTS üñ±Ô∏è‚å®Ô∏è

### üñ±Ô∏è **Mouse Events - Komplett Guide**

#### **Alla Mouse Events:**

|Event|N√§r det intr√§ffar|
|---|---|
|`onMouseClicked`|Musknapp **trycks OCH sl√§pps** utan att flytta musen|
|`onMousePressed`|Musknapp **trycks ner**|
|`onMouseReleased`|Musknapp **sl√§pps upp**|
|`onMouseMoved`|Musen **flyttas** (utan knapp nedtryckt)|
|`onMouseDragged`|Musen **flyttas med knapp nedtryckt**|
|`onMouseEntered`|Muspekaren **kommer in √∂ver** komponenten|
|`onMouseExited`|Muspekaren **l√§mnar** komponenten|

#### **MouseEvent Object Information:**

```java
@FXML
private void canvasMouseDragged(MouseEvent event) {
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // POSITION
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    double x = event.getX();  // X inom komponenten
    double y = event.getY();  // Y inom komponenten
    
    double sceneX = event.getSceneX();  // X inom hela scenen
    double sceneY = event.getSceneY();  // Y inom hela scenen
    
    double screenX = event.getScreenX();  // X p√• hela sk√§rmen
    double screenY = event.getScreenY();  // Y p√• hela sk√§rmen
    
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // MUSKNAPP
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    MouseButton button = event.getButton();
    
    if (button == MouseButton.PRIMARY) {
        System.out.println("V√§nster musknapp");
    } 
    else if (button == MouseButton.SECONDARY) {
        System.out.println("H√∂ger musknapp");
    } 
    else if (button == MouseButton.MIDDLE) {
        System.out.println("Mittenknapp");
    }
    
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // KLICK-INFO
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    int clickCount = event.getClickCount();
    if (clickCount == 2) {
        System.out.println("Dubbelklick!");
    }
    
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // MODIFIER-TANGENTER
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    if (event.isShiftDown()) {
        System.out.println("Shift nedtryckt");
    }
    if (event.isControlDown()) {
        System.out.println("Ctrl nedtryckt");
    }
    if (event.isAltDown()) {
        System.out.println("Alt nedtryckt");
    }
    
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    // SOURCE (VART EVENTET KOMMER FR√ÖN)
    // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    Object source = event.getSource();
    System.out.println("Event fr√•n: " + source);
}
```

#### **Praktiskt Exempel: Rita-app med Mouse Drag**

```java
public class PainterController {
    @FXML private Pane drawingPane;
    
    private Color currentColor = Color.BLACK;
    private int brushSize = 5;
    
    // Event handler: onMouseDragged="#drawingPaneMouseDragged"
    @FXML
    private void drawingPaneMouseDragged(MouseEvent event) {
        // Skapa en cirkel vid muspositionen
        Circle circle = new Circle(
            event.getX(),        // X-position
            event.getY(),        // Y-position
            brushSize,           // Radie
            currentColor         // F√§rg
        );
        
        // L√§gg till cirkeln i Pane
        drawingPane.getChildren().add(circle);
    }
    
    @FXML
    private void clearButtonPressed(ActionEvent event) {
        // Rensa alla cirklar
        drawingPane.getChildren().clear();
    }
    
    @FXML
    private void undoButtonPressed(ActionEvent event) {
        // Ta bort senaste cirkeln
        int count = drawingPane.getChildren().size();
        if (count > 0) {
            drawingPane.getChildren().remove(count - 1);
        }
    }
}
```

### ‚å®Ô∏è **Keyboard Events - √ñversikt**

Keyboard events √§r mindre vanliga i JavaFX GUI apps (TextField hanterar tangentbordsinput automatiskt), men h√§r √§r grunderna:

```java
// Lyssna p√• tangent-tryckningar p√• hela scenen
scene.setOnKeyPressed(event -> {
    KeyCode code = event.getCode();
    
    if (code == KeyCode.ENTER) {
        System.out.println("Enter tryckt!");
    }
    else if (code == KeyCode.ESCAPE) {
        System.out.println("Escape tryckt!");
    }
    else if (code == KeyCode.SPACE) {
        System.out.println("Space tryckt!");
    }
    
    // Kombinationer
    if (event.isControlDown() && code == KeyCode.S) {
        System.out.println("Ctrl+S: Spara!");
    }
});
```

---

## üìä **SAMMANFATTNING: KOMPLETT EVENT-HANDLING WORKFLOW**

### üîÑ **Steg-f√∂r-steg: Fr√•n FXML till Kod**

```
1. SCENE BUILDER - FXML Creation
   ‚Üì
   ‚Ä¢ Dra komponenter (Button, TextField, osv)
   ‚Ä¢ S√§tt fx:id f√∂r komponenter du vill anv√§nda i kod
   ‚Ä¢ S√§tt event handlers (onAction, onMouseDragged, osv)
   ‚Ä¢ Specificera controller class
   
2. FXML FILE - Genererad automatiskt
   ‚Üì
   <Button text="Ber√§kna" fx:id="calculateButton" 
           onAction="#calculateButtonPressed"/>
   
3. CONTROLLER CLASS - Java kod
   ‚Üì
   ‚Ä¢ Deklarera @FXML variables som matchar fx:id
   ‚Ä¢ Implementera event handler metoder (med @FXML)
   ‚Ä¢ initialize() f√∂r setup
   
4. APPLICATION CLASS - Startar appen
   ‚Üì
   ‚Ä¢ FXMLLoader laddar FXML
   ‚Ä¢ Kopplar FXML till Controller
   ‚Ä¢ Visar GUI
```

### ‚úÖ **Best Practices f√∂r Event Handling**

1. **Namngivning:**
    
    - `fx:id`: `camelCase` (t.ex. `calculateButton`)
    - Event handlers: verb + komponent + vad (t.ex. `calculateButtonPressed`)
2. **Separation of Concerns:**
    
    - GUI (FXML) = Utseende och struktur
    - Controller = Event handling och logik
    - Model = Data och business logic
3. **initialize() anv√§ndning:**
    
    - Konfigurera komponenter
    - Registrera property listeners
    - S√§tt initialv√§rden
4. **Error Handling:**
    
    ```java
    @FXML
    private void calculateButtonPressed(ActionEvent event) {
        try {
            // F√∂rs√∂k bearbeta input
            double value = Double.parseDouble(inputField.getText());
            // ... ber√§kningar ...
        }
        catch (NumberFormatException e) {
            // Hantera ogiltig input
            inputField.setText("Ogiltigt nummer!");
            inputField.selectAll();
        }
    }
    ```
    
5. **User Feedback:**
    
    - Disable buttons under processing
    - Visa progress indicators
    - Ge tydliga felmeddelanden

---

## üéØ **SNABBGUIDE: VANLIGA PATTERNS**

### Pattern 1: Button Click ‚Üí Ber√§kning ‚Üí Visa Resultat

```java
@FXML private TextField inputField;
@FXML private Label resultLabel;

@FXML
private void calculateButtonPressed(ActionEvent event) {
    String input = inputField.getText();
    // ... ber√§kning ...
    resultLabel.setText("Resultat: " + result);
}
```

### Pattern 2: Slider √Ñndring ‚Üí Live Update

```java
@FXML private Slider slider;
@FXML private Label valueLabel;

public void initialize() {
    slider.valueProperty().addListener((obs, oldVal, newVal) -> {
        valueLabel.setText(String.format("V√§rde: %.0f", newVal.doubleValue()));
    });
}
```

### Pattern 3: RadioButton Grupp ‚Üí Val ‚Üí Action

```java
@FXML private RadioButton option1;
@FXML private RadioButton option2;
@FXML private ToggleGroup optionGroup;

public void initialize() {
    option1.setUserData("OPTION_1");
    option2.setUserData("OPTION_2");
}

@FXML
private void optionSelected(ActionEvent event) {
    String choice = (String) optionGroup.getSelectedToggle().getUserData();
    System.out.println("Valde: " + choice);
}
```

### Pattern 4: Mouse Drag ‚Üí Rita

```java
@FXML private Pane canvas;

@FXML
private void canvasMouseDragged(MouseEvent event) {
    Circle dot = new Circle(event.getX(), event.getY(), 5, Color.BLACK);
    canvas.getChildren().add(dot);
}
```

---

**üéâ Du har nu en solid f√∂rst√•else f√∂r JavaFX GUI och h√§ndelsehantering! Kom ih√•g att event-driven programming handlar om att reagera p√• anv√§ndarinteraktioner, och MVC-m√∂nstret hj√§lper dig att h√•lla kod organiserad. üöÄ**